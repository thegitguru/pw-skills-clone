<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description"
        content="Explore PW Skills courses, mentors, and success stories. Find free and paid courses to advance your career.">
    <title>PW Skills Courses</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />
    <style>
        .badge-custom {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            color: #fff;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 0.35rem 0.75rem;
            border-radius: 9999px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .badge-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .registration-open {
            background: linear-gradient(135deg, #16a34a, #14532d);
            color: #d1fae5;
        }

        .registration-closed {
            background: linear-gradient(135deg, #dc2626, #7f1d1d);
            color: #fee2e2;
        }

        .card {
            background-color: #1f2937;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 1rem;
            animation-duration: 0.8s;
            animation-fill-mode: both;
        }

        .card-img {
            width: 6rem;
            height: 6rem;
            border-radius: 9999px;
            object-fit: cover;
            border: 4px solid #60a5fa;
            margin-bottom: 0.75rem;
        }

        @media (min-width: 640px) {
            .card-img {
                width: 5rem;
                height: 5rem;
            }
        }

        .testimonial-quote {
            font-style: italic;
            color: #d1d5db;
        }

        .mentor-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: #fff;
        }

        .mentor-designation {
            font-size: 0.875rem;
            color: #60a5fa;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .social-link {
            display: inline-block;
            padding: 0.5rem 1rem;
            border: 1px solid #60a5fa;
            color: #60a5fa;
            border-radius: 0.5rem;
            transition: all 0.2s;
            outline: none;
        }

        .social-link:hover,
        .social-link:focus {
            background: #60a5fa;
            color: #fff;
        }

        .social-link:focus {
            box-shadow: 0 0 0 2px #93c5fd;
        }

        .company-logos {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .success-story {
            background-color: #1f2937;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            border: 1px solid #374151;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .success-story h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .success-story p {
            color: #d1d5db;
        }

        .navbar {
            background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(96, 165, 250, 0.2);
        }

        .nav-menu {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .nav-link {
            position: relative;
            padding: 0.75rem 1.25rem;
            font-weight: 500;
            color: #93c5fd;
            transition: all 0.3s ease;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover {
            color: #fff;
            transform: scale(1.05);
            background: rgba(96, 165, 250, 0.2);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0.25rem;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #60a5fa, #3b82f6);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 60%;
        }

        .dropdown {
            position: relative;
        }

        .dropdown-toggle::after {
            content: '\f078';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.7rem;
            margin-left: 0.5rem;
            transition: transform 0.3s ease;
        }

        .dropdown:hover .dropdown-toggle::after {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: #1f2937;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            min-width: 200px;
            z-index: 1000;
            padding: 0.5rem 0;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(96, 165, 250, 0.2);
        }

        .dropdown:hover .dropdown-menu {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .dropdown-item {
            display: block;
            padding: 0.75rem 1.25rem;
            color: #93c5fd;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        .dropdown-item:hover {
            background: rgba(96, 165, 250, 0.2);
            color: #fff;
        }

        @media (max-width: 768px) {
            .nav-menu {
                transform: translateX(100%);
                position: fixed;
                top: 0;
                right: 0;
                height: 100vh;
                width: 80%;
                max-width: 300px;
                background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
                flex-direction: column;
                padding: 2rem 1.5rem;
                box-shadow: -4px 0 8px rgba(0, 0, 0, 0.3);
                backdrop-filter: blur(10px);
                z-index: 1000;
                overflow-y: auto;
            }

            .nav-menu.active {
                transform: translateX(0);
                animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .nav-link {
                padding: 1.25rem;
                font-size: 1.2rem;
                border-radius: 0.5rem;
                margin-bottom: 0.75rem;
                justify-content: space-between;
            }

            .dropdown-menu {
                position: static;
                box-shadow: none;
                background: transparent;
                padding: 0.5rem 1rem;
                border: none;
                backdrop-filter: none;
            }

            .dropdown-item {
                padding: 1rem 1.25rem;
                font-size: 1.1rem;
            }

            .search-input {
                width: 100% !important;
                margin-top: 1rem;
                padding: 0.75rem;
                font-size: 1rem;
            }
        }

        .hamburger {
            display: none;
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
                z-index: 1001;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
            }

            to {
                transform: translateX(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .carousel {
            position: relative;
            overflow: hidden;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-item {
            min-width: 100%;
            display: flex;
            justify-content: center;
        }

        .course-meta {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .filter-btn {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: 2px solid #60a5fa;
            color: #60a5fa;
            background: transparent;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .filter-btn img {
            width: 1.25rem;
            height: 1.25rem;
            object-fit: contain;
        }

        .filter-btn:hover {
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            color: #fff;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            color: #fff;
            border-color: #3b82f6;
        }

        .filter-btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.4);
            animation: pulse 1.5s infinite;
        }

        .filter-btn .spinner {
            display: none;
            width: 1rem;
            height: 1rem;
            border: 2px solid #fff;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        .filter-btn.loading .spinner {
            display: inline-block;
        }

        .learn-more-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            color: #fff;
            font-weight: 600;
            border-radius: 9999px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .learn-more-btn:hover {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .learn-more-btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.4);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(96, 165, 250, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(96, 165, 250, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(96, 165, 250, 0);
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .category-icon {
            width: 1.5rem;
            height: 1.5rem;
            object-fit: contain;
            margin-right: 0.5rem;
        }
    </style>
</head>

<body class="bg-gray-900 text-gray-100 transition-colors duration-500">
    <header class="sticky top-0 z-50 navbar">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <h1 class="text-3xl font-extrabold tracking-tight text-white">PW Skills</h1>
            <button
                class="hamburger md:hidden p-3 rounded-full hover:bg-gray-700 transition focus:ring-2 focus:ring-blue-500"
                aria-label="Toggle Menu">
                <i class="fas fa-bars text-gray-200 text-2xl"></i>
            </button>
            <nav class="nav-menu md:flex items-center gap-4">
                <a href="#freeCoursesContainer" class="nav-link"><i class="fas fa-book-open"></i> Free Courses</a>
                <a href="#paidCoursesContainer" class="nav-link"><i class="fas fa-graduation-cap"></i> Paid Courses</a>
                <a href="#mentorsContainer" class="nav-link"><i class="fas fa-user-tie"></i> Mentors</a>
                <a href="#testimonialsContainer" class="nav-link"><i class="fas fa-quote-left"></i> Testimonials</a>
                <a href="#successStoriesContainer" class="nav-link"><i class="fas fa-trophy"></i> Success Stories</a>
                <input type="search" id="searchInput" placeholder="Search courses, mentors..."
                    class="search-input w-64 px-5 py-2 rounded-full border border-gray-600 bg-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" />
                <a href="https://pwskills.com" target="_blank" rel="noopener noreferrer" class="nav-link"><i
                        class="fas fa-external-link-alt"></i> Visit PW Skills</a>
            </nav>
        </div>
    </header>
    <section class="max-w-7xl mx-auto px-6 py-6">
        <div class="filter-buttons flex flex-wrap justify-center gap-3"></div>
    </section>
    <div id="loader" class="text-center py-8 text-lg text-blue-400 animate-pulse hidden">Loading courses...</div>
    <div id="errorMessage" class="text-center text-red-400 text-sm py-2 hidden"></div>
    <section id="freeCoursesContainer" class="max-w-7xl mx-auto px-6 py-12">
        <h2 class="text-2xl font-semibold mb-8 border-b border-gray-700 pb-3">Free Courses</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"></div>
    </section>
    <section id="paidCoursesContainer" class="max-w-7xl mx-auto px-6 py-12">
        <h2 class="text-2xl font-semibold mb-8 border-b border-gray-700 pb-3">Paid Courses</h2>
        <div class="space-y-12"></div>
    </section>
    <section id="mentorsContainer" class="max-w-7xl mx-auto px-6 py-12">
        <h2 class="text-2xl font-semibold mb-8 border-b border-gray-700 pb-3">Mentors</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8"></div>
    </section>
    <section id="testimonialsContainer" class="max-w-7xl mx-auto px-6 py-12">
        <h2 class="text-2xl font-semibold mb-8 border-b border-gray-700 pb-3">Testimonials</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"></div>
    </section>
    <section id="successStoriesContainer" class="max-w-7xl mx-auto px-6 py-12">
        <h2 class="text-2xl font-semibold mb-8 border-b border-gray-700 pb-3 text-center">Success Stories</h2>
        <div class="carousel">
            <div class="carousel-inner"></div>
            <button
                class="carousel-control prev absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-gray-700 rounded-full hover:bg-gray-600 transition"
                aria-label="Previous slide">
                <i class="fas fa-chevron-left text-gray-200"></i>
            </button>
            <button
                class="carousel-control next absolute right-0 top-1/2 -translate-y-1/2 p-2 bg-gray-700 rounded-full hover:bg-gray-600 transition"
                aria-label="Next slide">
                <i class="fas fa-chevron-right text-gray-200"></i>
            </button>
        </div>
    </section>
    <section id="companiesLogosContainer" class="max-w-7xl mx-auto px-6 py-12">
        <h2 class="text-2xl font-semibold mb-8 border-b border-gray-700 pb-3">Hiring Partners</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-6 items-center"></div>
    </section>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.4.0/purify.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            hamburger.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                const isActive = navMenu.classList.contains('active');
                hamburger.setAttribute('aria-expanded', isActive);
                hamburger.querySelector('i').classList.toggle('fa-bars');
                hamburger.querySelector('i').classList.toggle('fa-times');
            });
            document.querySelectorAll('.nav-link:not(.dropdown-toggle)').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    if (this.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        navMenu.classList.remove('active');
                        hamburger.querySelector('i').classList.add('fa-bars');
                        hamburger.querySelector('i').classList.remove('fa-times');
                        hamburger.setAttribute('aria-expanded', 'false');
                        document.querySelector(this.getAttribute('href')).scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });
            document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
                toggle.addEventListener('click', (e) => {
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        const dropdown = toggle.parentElement;
                        const dropdownMenu = dropdown.querySelector('.dropdown-menu');
                        dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
                    }
                });
            });
        });
        const sanitize = (html) => DOMPurify.sanitize(html || '', { USE_PROFILES: { html: true } });
        let allCourses = [];
        let paidCategories = [];
        let mentors = [];
        let testimonials = [];
        let companiesLogos = [];
        let successStories = [];
        let categories = [];
        function getRegistrationStatus(startDate, endDate) {
            const now = new Date();
            const start = startDate ? new Date(startDate) : null;
            const end = endDate ? new Date(endDate) : null;
            if (!start || !end) return 'N/A';
            return now >= start && now <= end ? 'Open' : 'Closed';
        }
        function showSkeletonLoader(container, count) {
            const fragment = document.createDocumentFragment();
            for (let i = 0; i < count; i++) {
                const div = document.createElement('div');
                div.className = 'animate-pulse bg-gray-700 rounded-xl h-64';
                fragment.appendChild(div);
            }
            container.innerHTML = '';
            container.appendChild(fragment);
        }
        async function fetchData() {
            const cacheKeyCourses = 'pwSkillsCoursesData';
            const cacheKeyCategories = 'pwSkillsCategoriesData';
            const cacheExpiration = 60 * 60 * 1000;
            const cachedCourses = JSON.parse(localStorage.getItem(cacheKeyCourses));
            const cachedCategories = JSON.parse(localStorage.getItem(cacheKeyCategories));
            const now = new Date().getTime();
            const loader = document.getElementById('loader');
            const errorMessage = document.getElementById('errorMessage');
            const freeCoursesContainer = document.getElementById('freeCoursesContainer').querySelector('div');
            const paidCoursesContainer = document.getElementById('paidCoursesContainer').querySelector('div');
            const mentorsContainer = document.getElementById('mentorsContainer').querySelector('div');
            const testimonialsContainer = document.getElementById('testimonialsContainer').querySelector('div');
            const successStoriesContainer = document.getElementById('successStoriesContainer').querySelector('.carousel-inner');
            const companiesLogosContainer = document.getElementById('companiesLogosContainer').querySelector('div');
            const filterButtons = document.querySelector('.filter-buttons');
            loader.style.display = 'block';
            errorMessage.style.display = 'none';
            showSkeletonLoader(freeCoursesContainer, 6);
            showSkeletonLoader(paidCoursesContainer, 6);
            showSkeletonLoader(mentorsContainer, 4);
            showSkeletonLoader(testimonialsContainer, 3);
            showSkeletonLoader(successStoriesContainer, 3);
            companiesLogosContainer.innerHTML = '';
            filterButtons.innerHTML = `
                <button class="filter-btn active" data-filter="all" aria-label="Show all content" aria-pressed="true" aria-describedby="filter-all-desc">
                    <i class="fas fa-th"></i>
                    All Courses
                    <span class="spinner"></span>
                </button>
                <span id="filter-all-desc" class="sr-only">Filter to display all available courses</span>
            `;
            try {
                let courseData, categoryData;
                const fetchCourses = async () => {
                    if (cachedCourses && cachedCourses.timestamp && now - cachedCourses.timestamp < cacheExpiration) {
                        return cachedCourses.data;
                    }
                    const response = await fetch('https://api.pwskills.com/v2/course/revampedHome');
                    if (!response.ok) throw new Error(`Courses API error: ${response.status}`);
                    const data = await response.json();
                    if (!data.data) throw new Error('Invalid courses data format');
                    localStorage.setItem(cacheKeyCourses, JSON.stringify({ data, timestamp: now }));
                    return data;
                };
                const fetchCategories = async () => {
                    if (cachedCategories && cachedCategories.timestamp && now - cachedCategories.timestamp < cacheExpiration) {
                        return cachedCategories.data;
                    }
                    const response = await fetch('https://api.pwskills.com/v2/course/list-categories');
                    if (!response.ok) throw new Error(`Categories API error: ${response.status}`);
                    const data = await response.json();
                    if (!data.data) throw new Error('Invalid categories data format');
                    localStorage.setItem(cacheKeyCategories, JSON.stringify({ data, timestamp: now }));
                    return data;
                };
                [courseData, categoryData] = await Promise.all([fetchCourses(), fetchCategories()]);
                processData(courseData.data, categoryData.data);
            } catch (error) {
                loader.style.display = 'none';
                if (cachedCourses && cachedCategories) {
                    processData(cachedCourses.data, cachedCategories.data);
                    errorMessage.textContent = 'Using cached data due to network error.';
                    errorMessage.style.display = 'block';
                } else {
                    errorMessage.textContent = error.message || 'An error occurred while fetching data.';
                    errorMessage.style.display = 'block';
                    freeCoursesContainer.innerHTML = '<p class="text-center">No free courses available.</p>';
                    paidCoursesContainer.innerHTML = '<p class="text-center">No paid courses available.</p>';
                    mentorsContainer.innerHTML = '<p class="text-center">No mentors available.</p>';
                    testimonialsContainer.innerHTML = '<p class="text-center">No testimonials available.</p>';
                    successStoriesContainer.innerHTML = '<p class="text-center">No success stories available.</p>';
                    companiesLogosContainer.innerHTML = '<p class="text-center">No hiring partners available.</p>';
                }
            }
        }
        function processData(courseData, categoryData) {
            const loader = document.getElementById('loader');
            const freeCoursesContainer = document.getElementById('freeCoursesContainer').querySelector('div');
            const paidCoursesContainer = document.getElementById('paidCoursesContainer').querySelector('div');
            const mentorsContainer = document.getElementById('mentorsContainer').querySelector('div');
            const testimonialsContainer = document.getElementById('testimonialsContainer').querySelector('div');
            const successStoriesContainer = document.getElementById('successStoriesContainer').querySelector('.carousel-inner');
            const companiesLogosContainer = document.getElementById('companiesLogosContainer').querySelector('div');
            const filterButtons = document.querySelector('.filter-buttons');
            loader.style.display = 'none';
            categories = categoryData || [];
            allCourses = [
                ...(courseData.freeCourses || []).map(course => {
                    const category = categories.find(cat => cat.categoryId === course.parentCategoryId?._id);
                    return {
                        ...course,
                        type: 'free',
                        categoryTitle: category?.title || course.parentCategoryId?.title || 'N/A',
                        categoryIcon: category?.icon || 'https://placehold.co/24',
                        categoryId: category?.categoryId || course.parentCategoryId?._id,
                        categorySlug: category?.slug || 'course' // Fallback to 'course' if slug is missing
                    };
                }),
                ...(courseData.paidCourses || []).flatMap(category =>
                    category.courseDetails.map(course => {
                        const cat = categories.find(c => c.title === category.title);
                        return {
                            ...course,
                            type: 'paid',
                            categoryTitle: category.title,
                            categorySlug: cat?.slug || category.slug || 'course', // Use API slug or fallback
                            categoryColor: category.categoryColor,
                            categoryIcon: cat?.icon || 'https://placehold.co/24',
                            categoryId: cat?.categoryId
                        };
                    })
                )
            ];
            paidCategories = courseData.paidCourses || [];
            mentors = courseData.mentors || [];
            testimonials = courseData.testimonials || [];
            companiesLogos = courseData.companiesLogos || [];
            successStories = courseData.successStories || [];
            const filterFragment = document.createDocumentFragment();
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'filter-btn';
                button.dataset.filter = category.categoryId;
                button.setAttribute('aria-label', `Filter by ${category.title}`);
                button.setAttribute('aria-pressed', 'false');
                button.setAttribute('aria-describedby', `filter-${category.categoryId}-desc`);
                button.innerHTML = `
                    <img src="${sanitize(category.icon || 'https://placehold.co/24')}" alt="${sanitize(category.title)} icon" class="category-icon">
                    ${sanitize(category.title)}
                    <span class="spinner"></span>
                `;
                filterFragment.appendChild(button);
                const desc = document.createElement('span');
                desc.id = `filter-${category.categoryId}-desc`;
                desc.className = 'sr-only';
                desc.textContent = `Filter to display ${category.title} courses`;
                filterFragment.appendChild(desc);
            });
            filterButtons.appendChild(filterFragment);
            renderCourses(allCourses.filter(course => course.type === 'free'), freeCoursesContainer, 'free');
            renderPaidCourses(paidCategories);
            renderMentors(mentors);
            renderTestimonials(testimonials);
            renderSuccessStories(successStories);
            renderCompanies(companiesLogos);
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.addEventListener('click', () => {
                    button.classList.add('loading');
                    setTimeout(() => {
                        button.classList.remove('loading');
                        document.querySelectorAll('.filter-btn').forEach(btn => {
                            btn.classList.remove('active');
                            btn.setAttribute('aria-pressed', 'false');
                        });
                        button.classList.add('active');
                        button.setAttribute('aria-pressed', 'true');
                        filterContent(button.dataset.filter);
                    }, 500);
                });
            });
            let debounceTimeout;
            document.getElementById('searchInput').addEventListener('input', (e) => {
                clearTimeout(debounceTimeout);
                debounceTimeout = setTimeout(() => {
                    const searchTerms = e.target.value.toLowerCase().split(' ').filter(term => term);
                    filterContent(document.querySelector('.filter-buttons .filter-btn.active').dataset.filter, searchTerms);
                }, 300);
            });
            const prevBtn = document.querySelector('.carousel-control.prev');
            const nextBtn = document.querySelector('.carousel-control.next');
            let currentSlide = 0;
            function updateCarousel() {
                const carouselInner = successStoriesContainer;
                carouselInner.style.transform = `translateX(-${currentSlide * 100}%)`;
                document.querySelectorAll('.carousel-item').forEach((item, index) => {
                    item.setAttribute('aria-current', index === currentSlide ? 'true' : 'false');
                });
            }
            prevBtn.addEventListener('click', () => {
                if (currentSlide > 0) {
                    currentSlide--;
                    updateCarousel();
                }
            });
            nextBtn.addEventListener('click', () => {
                if (currentSlide < successStories.length - 1) {
                    currentSlide++;
                    updateCarousel();
                }
            });
        }
        function renderCourses(courses, container, type) {
            const fragment = document.createDocumentFragment();
            if (courses.length > 0) {
                courses.forEach(course => {
                    const registrationStatus = getRegistrationStatus(course.registration.startDate, course.registration.endDate);
                    const courseDiv = document.createElement('div');
                    courseDiv.className = 'mb-6';
                    courseDiv.innerHTML = `
                        <div class="course-card bg-gray-800 rounded-xl shadow-md hover:shadow-xl transform hover:scale-[1.03] transition duration-300 overflow-hidden animate__animated animate__zoomIn">
                            <img src="${sanitize(course.img || 'https://placehold.co/300x200')}" 
                                 alt="Thumbnail for ${sanitize(course.title)}" 
                                 loading="lazy"
                                 class="w-full h-48 object-cover rounded-t-xl" />
                            <div class="p-5 space-y-3">
                                <h5 class="text-lg font-semibold text-white truncate">${sanitize(course.title || 'Untitled Course')}</h5>
                                <p class="text-sm text-blue-400 flex items-center gap-2">
                                    <img src="${sanitize(course.categoryIcon)}" alt="${sanitize(course.categoryTitle)} icon" class="category-icon">
                                    ${sanitize(course.categoryTitle || 'N/A')}
                                </p>
                                <p class="text-sm text-gray-300 flex items-center gap-2"><i class="fas fa-clock"></i> Duration: ${sanitize(course.duration || 'N/A')}</p>
                                <p class="text-sm text-gray-300 flex items-center gap-2"><i class="fas fa-users"></i> Enrolled: ${sanitize(course.enrollmentCount || 'N/A')}</p>
                                <p class="text-sm font-semibold px-3 py-1 rounded-full inline-block ${registrationStatus === 'Open' ? 'registration-open' : 'registration-closed'} flex items-center gap-2">
                                    <i class="fas fa-calendar"></i> Registration: ${registrationStatus}
                                </p>
                                ${course.hashTag ? `<span class="badge badge-custom">${sanitize(course.hashTag.value)}</span>` : ''}
                                ${course.categoryMeta ? `
                                    <div class="course-meta bg-gray-800 rounded-lg p-4 mb-4 shadow-md hover:shadow-lg transition-shadow duration-300">
                                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-300">
                                            <div class="flex items-center gap-3 group relative" title="Average Salary Hike">
                                                <i class="fas fa-chart-line text-blue-400 text-lg group-hover:scale-110 transition-transform"></i>
                                                <div class="flex-1">
                                                    <p class="font-semibold">Avg. Salary Hike</p>
                                                    <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                        <div class="bg-blue-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(course.categoryMeta.salaryHike || '0%')}"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-400">${sanitize(course.categoryMeta.salaryHike || '0%')}</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3 group relative" title="Highest Salary">
                                                <i class="fas fa-money-bill text-green-400 text-lg group-hover:scale-110 transition-transform"></i>
                                                <div class="flex-1">
                                                    <p class="font-semibold">Highest Salary</p>
                                                    <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                        <div class="bg-green-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(course.categoryMeta.highestSalary ? '10%' : '0%')}"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-400">${sanitize(course.categoryMeta.highestSalary || '0')}</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3 group relative" title="Career Transitions">
                                                <i class="fas fa-briefcase text-purple-400 text-lg group-hover:scale-110 transition-transform"></i>
                                                <div class="flex-1">
                                                    <p class="font-semibold">Career Transitions</p>
                                                    <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                        <div class="bg-purple-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(course.categoryMeta.careerTransition ? '10%' : '0%')}"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-400">${sanitize(course.categoryMeta.careerTransition || '0')}</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center gap-3 group relative" title="Hiring Partners">
                                                <i class="fas fa-building text-yellow-400 text-lg group-hover:scale-110 transition-transform"></i>
                                                <div class="flex-1">
                                                    <p class="font-semibold">Hiring Partners</p>
                                                    <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                        <div class="bg-yellow-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(course.categoryMeta.hiringPartner ? '10%' : '0%')}"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-400">${sanitize(course.categoryMeta.hiringPartner || '0')}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ` : ''}
                                <a href="https://www.pwskills.com/${sanitize(course.categorySlug)}/${sanitize(course.slug)}" 
                                   class="learn-more-btn mt-3" 
                                   aria-label="Learn more about ${sanitize(course.title || 'this course')}">
                                   <span>Learn More</span>
                                   <i class="fas fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    `;
                    fragment.appendChild(courseDiv);
                });
            } else {
                const p = document.createElement('p');
                p.className = 'text-center text-gray-400 py-10';
                p.textContent = `No ${type} courses available.`;
                fragment.appendChild(p);
            }
            container.innerHTML = '';
            container.appendChild(fragment);
        }
        function renderPaidCourses(categories) {
            const paidCoursesContainer = document.getElementById('paidCoursesContainer').querySelector('div');
            const fragment = document.createDocumentFragment();
            if (categories.length > 0) {
                categories.forEach(category => {
                    const cat = categories.find(c => c.title === category.title);
                    const categorySection = document.createElement('section');
                    categorySection.className = `category-section animate__animated animate__fadeIn mb-12`;
                    categorySection.dataset.category = category.slug;
                    categorySection.innerHTML = `
                        <h3 class="text-xl font-bold mb-3 text-white flex items-center gap-2">
                            <img src="${sanitize(cat?.icon || 'https://placehold.co/24')}" alt="${sanitize(category.title)} icon" class="category-icon">
                            ${sanitize(category.title)}
                        </h3>
                        ${category.categoryMeta ? `
                            <div class="course-meta bg-gray-800 rounded-lg p-4 mb-4 shadow-md hover:shadow-lg transition-shadow duration-300">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-300">
                                    <div class="flex items-center gap-3 group relative" title="Average Salary Hike">
                                        <i class="fas fa-chart-line text-blue-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Avg. Salary Hike</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-blue-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.salaryHike || '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.salaryHike || '0%')}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3 group relative" title="Highest Salary">
                                        <i class="fas fa-money-bill text-green-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Highest Salary</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-green-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.highestSalary ? '10%' : '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.highestSalary || '0')}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3 group relative" title="Career Transitions">
                                        <i class="fas fa-briefcase text-purple-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Career Transitions</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-purple-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.careerTransition ? '10%' : '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.careerTransition || '0')}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3 group relative" title="Hiring Partners">
                                        <i class="fas fa-building text-yellow-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Hiring Partners</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-yellow-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.hiringPartner ? '10%' : '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.hiringPartner || '0')}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
                            ${category.courseDetails.map(course => {
                        const registrationStatus = getRegistrationStatus(course.registration.startDate, course.registration.endDate);
                        return `
                                    <div class="course-card bg-gray-800 rounded-xl shadow-md hover:shadow-xl transform hover:scale-[1.03] transition duration-300 overflow-hidden p-0">
                                        <img src="${sanitize(course.img || 'https://placehold.co/300x200')}" alt="Thumbnail for ${sanitize(course.title)}" loading="lazy" class="w-full h-48 object-cover rounded-t-xl" />
                                        <div class="p-5 space-y-3">
                                            <h5 class="text-lg font-semibold text-white truncate">${sanitize(course.title || 'Untitled Course')}</h5>
                                            <p class="text-sm text-blue-400 flex items-center gap-2">
                                                <img src="${sanitize(cat?.icon || 'https://placehold.co/24')}" alt="${sanitize(category.title)} icon" class="category-icon">
                                                ${sanitize(category.title)}
                                            </p>
                                            <p class="text-sm text-gray-300 flex items-center gap-2"><i class="fas fa-clock"></i> Duration: ${sanitize(course.duration || 'N/A')}</p>
                                            <p class="text-sm text-gray-300 flex items-center gap-2"><i class="fas fa-users"></i> Enrolled: ${sanitize(course.enrollmentCount || 'N/A')}</p>
                                            <p class="text-sm font-semibold px-3 py-1 rounded-full inline-block ${registrationStatus === 'Open' ? 'registration-open' : 'registration-closed'} flex items-center gap-2">
                                                <i class="fas fa-calendar"></i> Registration: ${registrationStatus}
                                            </p>
                                            ${course.hashTag ? `<span class="badge badge-custom">${sanitize(course.hashTag.value)}</span>` : ''}
                                            <a href="https://www.pwskills.com/${sanitize(cat?.slug || 'course')}/${sanitize(course.slug)}" 
                                               class="learn-more-btn mt-3" 
                                               aria-label="Learn more about ${sanitize(course.title || 'this course')}">
                                               <span>Learn More</span>
                                               <i class="fas fa-arrow-right"></i>
                                            </a>
                                        </div>
                                    </div>
                                `;
                    }).join('')}
                        </div>
                    `;
                    fragment.appendChild(categorySection);
                });
            } else {
                const p = document.createElement('p');
                p.className = 'text-center text-gray-400 py-10';
                p.textContent = 'No paid courses available.';
                fragment.appendChild(p);
            }
            paidCoursesContainer.innerHTML = '';
            paidCoursesContainer.appendChild(fragment);
        }
        function renderMentors(mentors) {
            const container = document.getElementById('mentorsContainer').querySelector('div');
            container.innerHTML = '';
            if (!mentors?.length) {
                container.innerHTML = `<p class="text-center text-gray-400 py-10">No mentors available.</p>`;
                return;
            }
            mentors.forEach(mentor => {
                const card = document.createElement('article');
                card.className = 'card animate__animated animate__zoomIn';
                const img = document.createElement('img');
                img.src = sanitize(mentor.img?.link || 'https://placehold.co/100');
                img.alt = `Portrait of ${sanitize(mentor.name || 'mentor')}`;
                img.loading = 'lazy';
                img.className = 'card-img';
                const name = document.createElement('h3');
                name.className = 'mentor-name';
                name.textContent = sanitize(mentor.name || 'Unknown Mentor');
                const designation = document.createElement('p');
                designation.className = 'mentor-designation';
                designation.textContent = sanitize(mentor.instructorDetails?.designation || 'N/A');
                const description = document.createElement('p');
                description.className = 'text-sm text-gray-300 mb-3';
                description.textContent = sanitize(mentor.description || 'No description available');
                card.append(img, name, designation, description);
                function appendCompanies(title, companies) {
                    if (!companies?.length) return;
                    const label = document.createElement('p');
                    label.className = 'font-semibold text-gray-300 mt-4 mb-1';
                    label.textContent = title;
                    card.appendChild(label);
                    const logos = document.createElement('div');
                    logos.className = 'company-logos';
                    companies.forEach(company => {
                        const logo = document.createElement('img');
                        logo.src = sanitize(company.companyLogoFileName
                            ? `https://cdn.pwskills.com/assets/uploads/company_logos/${company.companyLogoFileName}`
                            : 'https://placehold.co/40');
                        logo.alt = `Logo of ${sanitize(company.company || company.name || '')}`;
                        logo.title = sanitize(company.company || company.name || '');
                        logo.loading = 'lazy';
                        logo.className = 'w-10 h-10 object-contain rounded';
                        logos.appendChild(logo);
                    });
                    card.appendChild(logos);
                }
                appendCompanies('Current Companies:', mentor.instructorDetails?.companies);
                appendCompanies('Past Companies:', mentor.instructorDetails?.pastCompanies);
                const exp = document.createElement('p');
                exp.className = 'text-sm text-gray-300 flex justify-center gap-2 mb-1';
                exp.innerHTML = `<i class="fas fa-briefcase"></i> Work Experience: ${sanitize(mentor.instructorDetails?.workExperience || 'N/A')} years`;
                card.appendChild(exp);
                const teachExp = document.createElement('p');
                teachExp.className = 'text-sm text-gray-300 flex justify-center gap-2 mb-3';
                teachExp.innerHTML = `<i class="fas fa-chalkboard-teacher"></i> Teaching Experience: ${sanitize(mentor.instructorDetails?.teachingExperience || 'N/A')} years`;
                card.appendChild(teachExp);
                if (mentor.social?.linkedin) {
                    const linkedin = document.createElement('a');
                    linkedin.href = sanitize(mentor.social.linkedin);
                    linkedin.target = '_blank';
                    linkedin.rel = 'noopener noreferrer';
                    linkedin.className = 'social-link';
                    linkedin.innerHTML = '<i class="fab fa-linkedin mr-2"></i> LinkedIn';
                    linkedin.setAttribute('aria-label', `LinkedIn profile of ${sanitize(mentor.name || 'mentor')}`);
                    card.appendChild(linkedin);
                }
                container.appendChild(card);
            });
        }
        function renderTestimonials(testimonials) {
            const container = document.getElementById('testimonialsContainer').querySelector('div');
            container.innerHTML = '';
            if (!testimonials?.length) {
                container.innerHTML = `<p class="text-center text-gray-400 py-10">No testimonials available.</p>`;
                return;
            }
            testimonials.forEach(testimonial => {
                const card = document.createElement('article');
                card.className = 'card animate__animated animate__zoomIn';
                const img = document.createElement('img');
                img.src = sanitize(testimonial.testimonialImage
                    ? `https://cdn.pwskills.com/assets/uploads/testimonialImage/${testimonial.testimonialImage}`
                    : 'https://placehold.co/80');
                img.alt = `Portrait of ${sanitize(testimonial.name)}`;
                img.loading = 'lazy';
                img.className = 'card-img';
                const quote = document.createElement('p');
                quote.className = 'testimonial-quote';
                quote.textContent = `"${sanitize(testimonial.description || 'No comment provided')}"`;
                const name = document.createElement('p');
                name.className = 'font-semibold mt-2 text-white';
                name.textContent = sanitize(testimonial.name || 'Anonymous');
                const designation = document.createElement('p');
                designation.className = 'text-xs text-gray-400';
                designation.textContent = sanitize(testimonial.designation || 'N/A');
                const company = document.createElement('p');
                company.className = 'text-xs text-gray-500';
                company.textContent = `Company: ${sanitize(testimonial.companyId?.name || 'N/A')}`;
                card.append(img, quote, name, designation, company);
                if (testimonial.courseId) {
                    const course = document.createElement('p');
                    course.className = 'text-xs text-gray-500';
                    course.textContent = `Course: ${sanitize(testimonial.courseId.title || 'N/A')}`;
                    card.appendChild(course);
                }
                container.appendChild(card);
            });
        }
        function renderSuccessStories(stories) {
            const container = document.getElementById('successStoriesContainer').querySelector('.carousel-inner');
            const fragment = document.createDocumentFragment();
            if (!stories?.length) {
                const p = document.createElement('p');
                p.className = 'text-center text-gray-400 py-10';
                p.textContent = 'No success stories available.';
                fragment.appendChild(p);
            } else {
                stories.forEach((story, index) => {
                    const card = document.createElement('article');
                    card.className = 'carousel-item success-story animate__animated animate__zoomIn max-w-md mx-auto';
                    card.setAttribute('role', 'group');
                    card.setAttribute('aria-label', `Success story of ${sanitize(story.studentName)}`);
                    card.setAttribute('aria-current', index === 0 ? 'true' : 'false');
                    const img = document.createElement('img');
                    img.src = sanitize(story.studentImage || 'https://placehold.co/100');
                    img.alt = `Photo of ${sanitize(story.studentName)}`;
                    img.loading = 'lazy';
                    img.className = 'w-24 h-24 rounded-full object-cover border-4 border-blue-400 mx-auto';
                    const name = document.createElement('h3');
                    name.className = 'text-xl font-semibold text-white mt-4';
                    name.textContent = sanitize(story.studentName);
                    const designation = document.createElement('p');
                    designation.className = 'text-sm text-blue-400 font-medium';
                    designation.textContent = sanitize(story.studentDesignation || 'Professional');
                    const comment = document.createElement('blockquote');
                    comment.className = 'italic text-gray-300 mt-2';
                    comment.textContent = `"${sanitize(story.comment)}"`;
                    const company = document.createElement('footer');
                    company.className = 'text-sm text-gray-400 mt-4';
                    company.textContent = `Placed at: ${sanitize(story.toCompanyId?.name || 'Company not specified')}`;
                    if (story.toCompanyId?.description) {
                        const companyDesc = document.createElement('p');
                        companyDesc.className = 'text-xs text-gray-500 mt-1';
                        companyDesc.textContent = sanitize(story.toCompanyId.description);
                        company.appendChild(companyDesc);
                    }
                    card.append(img, name, designation, comment, company);
                    fragment.appendChild(card);
                });
            }
            container.innerHTML = '';
            container.appendChild(fragment);
        }
        function renderCompanies(companiesLogos) {
            const container = document.getElementById('companiesLogosContainer').querySelector('div');
            const fragment = document.createDocumentFragment();
            if (companiesLogos.length > 0) {
                companiesLogos.forEach(company => {
                    const companyDiv = document.createElement('div');
                    companyDiv.className = 'flex flex-col items-center p-4 bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow duration-300 animate__animated animate__fadeIn';
                    companyDiv.innerHTML = `
                        <img 
                            src="${sanitize(company.companyLogoFileName
                        ? `https://cdn.pwskills.com/assets/uploads/company_logos/${company.companyLogoFileName}`
                        : 'https://placehold.co/100')}" 
                            alt="Logo of ${sanitize(company.name)}" 
                            loading="lazy"
                            class="w-20 h-20 object-contain mb-2"
                        >
                        <p class="text-center text-gray-300 text-sm font-medium">${sanitize(company.name)}</p>
                    `;
                    fragment.appendChild(companyDiv);
                });
            } else {
                const p = document.createElement('p');
                p.className = 'text-center text-gray-400 py-6 italic';
                p.textContent = 'No hiring partners available.';
                fragment.appendChild(p);
            }
            container.innerHTML = '';
            container.appendChild(fragment);
        }
        function filterContent(categoryFilter, searchTerms = []) {
            const freeCoursesContainer = document.getElementById('freeCoursesContainer').querySelector('div');
            const paidCoursesContainer = document.getElementById('paidCoursesContainer').querySelector('div');
            const mentorsContainer = document.getElementById('mentorsContainer').querySelector('div');
            const testimonialsContainer = document.getElementById('testimonialsContainer').querySelector('div');
            let filteredCourses = allCourses;
            if (categoryFilter !== 'all') {
                filteredCourses = allCourses.filter(course => course.categoryId === categoryFilter);
            }
            if (searchTerms.length > 0) {
                filteredCourses = filteredCourses.filter(course =>
                    searchTerms.every(term =>
                        course.title.toLowerCase().includes(term) ||
                        (course.categoryTitle || '').toLowerCase().includes(term)
                    )
                );
            }
            let filteredMentors = mentors;
            if (searchTerms.length > 0) {
                filteredMentors = mentors.filter(mentor =>
                    searchTerms.every(term =>
                        mentor.name.toLowerCase().includes(term) ||
                        (mentor.description || '').toLowerCase().includes(term)
                    )
                );
            }
            let filteredTestimonials = testimonials;
            if (searchTerms.length > 0) {
                filteredTestimonials = testimonials.filter(testimonial =>
                    searchTerms.every(term =>
                        testimonial.name.toLowerCase().includes(term) ||
                        (testimonial.description || '').toLowerCase().includes(term) ||
                        (testimonial.courseId?.title || '').toLowerCase().includes(term)
                    )
                );
            }
            const freeCourses = filteredCourses.filter(course => course.type === 'free');
            const paidCourses = filteredCourses.filter(course => course.type === 'paid');
            renderCourses(freeCourses, freeCoursesContainer, 'free');
            paidCoursesContainer.innerHTML = '';
            const fragment = document.createDocumentFragment();
            if (categoryFilter === 'all' && searchTerms.length === 0) {
                renderPaidCourses(paidCategories);
            } else {
                const groupedByCategory = paidCourses.reduce((acc, course) => {
                    acc[course.categoryTitle] = acc[course.categoryTitle] || [];
                    acc[course.categoryTitle].push(course);
                    return acc;
                }, {});
                Object.entries(groupedByCategory).forEach(([categoryTitle, courses]) => {
                    const category = paidCategories.find(cat => cat.title === categoryTitle);
                    const cat = categories.find(c => c.title === categoryTitle);
                    const categorySection = document.createElement('div');
                    categorySection.className = `category-section category-${sanitize(category?.slug)} animate__animated animate__fadeIn`;
                    categorySection.dataset.category = category?.slug;
                    categorySection.innerHTML = `
                        <h3 class="category-title text-xl font-bold mb-3 text-white flex items-center gap-2">
                            <img src="${sanitize(cat?.icon || 'https://placehold.co/24')}" alt="${sanitize(categoryTitle)} icon" class="category-icon">
                            ${sanitize(categoryTitle)}
                        </h3>
                        ${category?.categoryMeta ? `
                            <div class="course-meta bg-gray-800 rounded-lg p-4 mb-4 shadow-md hover:shadow-lg transition-shadow duration-300">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-300">
                                    <div class="flex items-center gap-3 group relative" title="Average Salary Hike">
                                        <i class="fas fa-chart-line text-blue-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Avg. Salary Hike</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-blue-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.salaryHike || '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.salaryHike || '0%')}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3 group relative" title="Highest Salary">
                                        <i class="fas fa-money-bill text-green-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Highest Salary</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-green-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.highestSalary ? '10%' : '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.highestSalary || '0')}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3 group relative" title="Career Transitions">
                                        <i class="fas fa-briefcase text-purple-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Career Transitions</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-purple-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.careerTransition ? '10%' : '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.careerTransition || '0')}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3 group relative" title="Hiring Partners">
                                        <i class="fas fa-building text-yellow-400 text-lg group-hover:scale-110 transition-transform"></i>
                                        <div class="flex-1">
                                            <p class="font-semibold">Hiring Partners</p>
                                            <div class="w-full bg-gray-700 rounded-full h-2 mt-1">
                                                <div class="bg-yellow-500 h-2 rounded-full transition-all duration-500" style="width: ${sanitize(category.categoryMeta.hiringPartner ? '10%' : '0%')}"></div>
                                            </div>
                                            <span class="text-xs text-gray-400">${sanitize(category.categoryMeta.hiringPartner || '0')}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
                            ${courses.map(course => {
                        const registrationStatus = getRegistrationStatus(course.registration.startDate, course.registration.endDate);
                        return `
                                    <div class="course-card bg-gray-800 rounded-xl shadow-md hover:shadow-xl transform hover:scale-[1.03] transition duration-300 overflow-hidden">
                                        <img src="${sanitize(course.img || 'https://placehold.co/300x200')}" class="course-img card-img-top" alt="Thumbnail for ${sanitize(course.title)}" loading="lazy">
                                        <div class="p-5 space-y-3">
                                            <h5 class="card-title text-lg font-semibold text-white truncate">${sanitize(course.title || 'Untitled Course')}</h5>
                                            <p class="card-text text-sm text-blue-400 flex items-center gap-2">
                                                <img src="${sanitize(course.categoryIcon)}" alt="${sanitize(categoryTitle)} icon" class="category-icon">
                                                ${sanitize(categoryTitle)}
                                            </p>
                                            <p class="card-text text-sm text-gray-300 flex items-center gap-2"><i class="fas fa-clock"></i> Duration: ${sanitize(course.duration || 'N/A')}</p>
                                            <p class="card-text text-sm text-gray-300 flex items-center gap-2"><i class="fas fa-users"></i> Enrolled: ${sanitize(course.enrollmentCount || 'N/A')}</p>
                                            <p class="card-text registration-status registration-${registrationStatus.toLowerCase()} text-sm font-semibold px-3 py-1 rounded-full inline-block flex items-center gap-2">
                                                <i class="fas fa-calendar"></i> Registration: ${registrationStatus}
                                            </p>
                                            ${course.hashTag ? `<span class="badge badge-custom">${sanitize(course.hashTag.value)}</span>` : ''}
                                            <a href="https://www.pwskills.com/${sanitize(course.categorySlug)}/${sanitize(course.slug)}" 
                                               class="learn-more-btn mt-3" 
                                               aria-label="Learn more about ${sanitize(course.title || 'this course')}">
                                               <span>Learn More</span>
                                               <i class="fas fa-arrow-right"></i>
                                            </a>
                                        </div>
                                    </div>
                                `;
                    }).join('')}
                        </div>
                    `;
                    fragment.appendChild(categorySection);
                });
                if (Object.keys(groupedByCategory).length === 0) {
                    const p = document.createElement('p');
                    p.className = 'text-center';
                    p.textContent = 'No paid courses match your search.';
                    fragment.appendChild(p);
                }
                paidCoursesContainer.appendChild(fragment);
            }
        }
        document.addEventListener('DOMContentLoaded', fetchData);
    </script>
</body>

</html>